class SugerenciasManager{
  var sugerenciaDiaria

  list subsMail
  list subsNotificacion

  list alertas;

  _instance
  instance(){
    if (!_instance)
      _instance = new RepositorioAtuendos();
    return _instance;
  }

  subscribirAlMail(email){
    subsMail.add(email);
  }

  subscribirANotificacion(userId){ //nunca se menciona que tiene un usuario 
    subsNotificacion.add(userId);
  }

  calcularSugerencias(atuendosDeUsuario){
    return atuendosDeUsuario.filter((atuendo) => sugerenciaDiaria.cumple(atuendo))
  }

  actualizarSugerencia(){
    clima = ClimaManager.instance();
    alertas = clima.getAlertas();

    temperaturaActual = clima.getTemperatura();
    sugerenciaDiaria = new SugerenciaPorTemperatura(temperatura);
  }

  avisarSubscriptores(){
    if(alertas.contains("STORM"))
      subsNotificacion.forEach(sub -> NotificationService.notify("Lleva paraguas!"));
    if(alertas.contains("HAIL"))
      subsNotificacion.forEach(sub -> NotificationService.notify("No salgas en auto! Granizooo!!!"));
    
    mensajeAlertas = "";
    alertas.forEach(alerta -> mensajeAlertas += alerta);
  }
}